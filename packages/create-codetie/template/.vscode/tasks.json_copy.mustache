{
    "version": "2.0.0",
    "tasks": [
        {
        "label": "Generate Xcode Project with XcodeGen",
        "type": "shell",
        "command": "sh",
        "args": [
            "${workspaceFolder}/scripts/generate.sh"
        ],
        "problemMatcher": [],
        "group": {
            "kind": "build",
            "isDefault": true
        }
        },
        {
        "label": "Build Swift Project",
        "type": "shell",
        "command": "ts-node",
        "args": [
            "${workspaceFolder}/scripts/project-scripts.ts",
            "build",
            "${input:xcodeproj}"
        ],
        "problemMatcher": [
            "$xcodebuild"
        ],
        "group": {
            "kind": "build",
            "isDefault": true
        }
        },
        {
        "label": "Run SwiftLint",
        "type": "shell",
        "command": "swiftlint",
        "args": [],
        "problemMatcher": [
            "$swiftlint"
        ],
        "group": "build"
        },
        {
        "label": "Run with Simulator",
        "type": "shell",
        "command": "ts-node",
        "args": [
            "${workspaceFolder}/scripts/project-scripts.ts",
            "run",
            "${input:simulator}"
        ],
        "problemMatcher": [],
        "dependsOn": "Build Swift Project",
        "group": "build"
        },
        {
        "label": "Start Inject Hot Reload Server",
        "type": "shell",
        "command": "inject",
        "args": [],
        "problemMatcher": [],
        "group": "none"
        },
        {
        "label": "Start Xcode Build Server",
        "type": "shell",
        "command": "sh",
        "args": [
            "${workspaceFolder}/scripts/start_build_server.sh"
        ],
        "problemMatcher": [],
        "group": "none"
        }
    ],
    "inputs": [
        {
        "id": "xcodeproj",
        "type": "pickString",
        "description": "Select the Xcode project file",
        "options": [
            "{{PROJECT_NAME}}.xcodeproj"
        ],
        "default": "{{PROJECT_NAME}}.xcodeproj"
        },
        {
        "id": "scheme",
        "type": "pickString",
        "description": "Select the scheme to build",
        "options": [
            "{{PROJECT_NAME}}"
        ],
        "default": "{{PROJECT_NAME}}"
        },
        {
        "id": "simulator",
        "type": "command",
        "command": "extension.commandvariable.file.content",
        "args": {
            "fileName": "${workspaceFolder}/simulators.yml",
            "key": "defaultAlways",
            "default": "false",
            "transformers": [
            {
                "type": "conditional",
                "default": "${command:extension.commandvariable.file.content}",
                "config": {
                "cases": [
                    {
                    "compare": "true",
                    "value": "${command:extension.commandvariable.file.content}",
                    "args": {
                        "fileName": "${workspaceFolder}/simulators.yml",
                        "key": "default"
                    }
                    }
                ],
                "fallback": "${input:chooseSimulator}"
                }
            }
            ]
        }
        },
        {
        "id": "chooseSimulator",
        "type": "command",
        "command": "extension.commandvariable.file.content",
        "args": {
            "fileName": "${workspaceFolder}/simulators.yml",
            "key": "simulators",
            "type": "pickString",
            "description": "Choose a simulator"
        }
        }
    ]
}
